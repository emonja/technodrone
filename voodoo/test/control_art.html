<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Art Controller</title>
    <style>
        body { font-family: 'Courier New', sans-serif; padding: 30px; background: #222; color: white; max-width: 500px; margin: 0 auto; }
        h2 { text-transform: uppercase; border-bottom: 2px solid #555; padding-bottom: 10px; }
        
        .control-group { margin-bottom: 30px; background: #333; padding: 15px; border-radius: 8px; }
        label { display: block; margin-bottom: 10px; font-weight: bold; }
        
        input[type="range"] { width: 100%; height: 15px; accent-color: #ff5733; cursor: pointer; }
        
        .color-row { display: flex; gap: 10px; justify-content: center; }
        .color-btn { 
            width: 40px; height: 40px; border-radius: 50%; border: 2px solid #fff; 
            cursor: pointer; transition: transform 0.2s;
        }
        .color-btn:active { transform: scale(0.9); }
    </style>
</head>
<body>
    <h2>Art Director Mode</h2>
    
    <div class="control-group">
        <label>Chaos Level (Speed)</label>
        <input type="range" min="0" max="5" step="0.5" value="1" oninput="updateSpeed(this.value)">
    </div>

    <div class="control-group">
        <label>Web Complexity (Connectivity)</label>
        <input type="range" min="0" max="300" step="10" value="100" oninput="updateDist(this.value)">
    </div>

    <div class="control-group">
        <label>Mood Palette</label>
        <div class="color-row">
            <div class="color-btn" style="background:#ff5733" onclick="updateColor('#ff5733')"></div> <div class="color-btn" style="background:#33ff57" onclick="updateColor('#33ff57')"></div> <div class="color-btn" style="background:#3357ff" onclick="updateColor('#3357ff')"></div> <div class="color-btn" style="background:#f0f" onclick="updateColor('#f0f')"></div>       </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // --- YOUR CONFIG IS PRE-FILLED HERE ---
        const firebaseConfig = {
            apiKey: "AIzaSyDXZbUQ81jxiGgH89gXdoH7pf2mSxp_rN0",
            authDomain: "technodrone-ce06d.firebaseapp.com",
            databaseURL: "https://technodrone-ce06d-default-rtdb.firebaseio.com",
            projectId: "technodrone-ce06d",
            storageBucket: "technodrone-ce06d.firebasestorage.app",
            messagingSenderId: "869296657162",
            appId: "1:869296657162:web:7e0bf1093fc59d4a99a0f3",
            measurementId: "G-HS53JTV490"
        };
        // ---------------------------------------

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // We use 'update' instead of 'set' to change only specific properties
        // This prevents overwriting the whole object if two people control it at once
        window.updateSpeed = (val) => {
            update(ref(db, 'artState'), { speed: Number(val) });
        };

        window.updateDist = (val) => {
            update(ref(db, 'artState'), { connectDistance: Number(val) });
        };

        window.updateColor = (hex) => {
            update(ref(db, 'artState'), { color: hex });
        };
    </script>
</body>
</html>
